"use strict";function scaleOut(a,b){var c=b?.5:0,d=App.$listSongsTitle.filter("[data-index="+App.activeIndex+"]"),e=App.activeIndex?App.$listSongsTitle.not(d):App.$listSongsTitle;TweenLite.killTweensOf(e),TweenLite.to(App.$mosaicsElementsShadow,.2,{opacity:0,visibility:"hidden",ease:CustomEase.create("custom","M0,0 C0,0 0.58,1 1,1")}),TweenLite.to(e,0,{opacity:0,display:"none",ease:App.animation.ease}),TweenLite.to(a,.4,{transformOrigin:"center center",scale:1,ease:App.animation.ease}),TweenLite.to(a.parent(),.4,{opacity:c,ease:App.animation.ease})}function scaleIn(a){var b=a.data("index"),c=App.$listSongsTitle.filter("[data-index="+b+"]"),d=App.$mosaicsElementsShadow.filter("[data-index="+b+"]"),e=App.$listSongsTitle.not(c);TweenLite.killTweensOf(e),TweenLite.to(e,0,{opacity:0,display:"none",ease:App.animation.ease}),TweenLite.to(c,.4,{opacity:1,display:"block",ease:App.animation.ease}),TweenLite.to(a,.4,{transformOrigin:"center center",scale:1.2,ease:App.animation.ease}),TweenLite.to(a.parent(),.4,{opacity:1,ease:App.animation.ease}),TweenLite.to(d,.2,{opacity:1,visibility:"visible",ease:CustomEase.create("custom","M0,0 C0,0 0.58,1 1,1")},.2)}function waitingSound(a){return function(){a===App.activeIndex&&App.$playBtn.addClass("is-loading")}}function plaingSound(a){return function(){a===App.activeIndex&&App.$playBtn.removeClass("is-loading")}}function musicPlay(a){var b=App.music[a-1];App.$playBtn.removeClass("is-paused"),b.addEventListener("waiting",waitingSound(a)),b.addEventListener("playing",plaingSound(a)),b.volume=1,b.play()}function musicPause(a){App.$playBtn.addClass("is-paused"),App.music[a-1].pause()}function musicStop(a){var b=a?App.music[a-1]:App.music;if(!b.length)return b.pause(),b.currentTime=0,!1;$.each(b,function(){this.pause(),this.currentTime=0})}function changeBtnStatus(){var a=App.music.length;App.$changeBtn.removeClass("is-disabled"),1===App.activeIndex&&App.$changeBtn.filter(".t-prev").addClass("is-disabled"),App.activeIndex===a&&App.$changeBtn.filter(".t-next").addClass("is-disabled")}function openAnimation(a){var b=App.$songTitle.filter("[data-index="+a+"]"),c=App.$infoAuthor.filter("[data-index="+a+"]"),d=App.$infoText.filter("[data-index="+a+"]"),e=$(".js-album-info__text").find(".ps__rail-y"),f=new TimelineLite({onComplete:function(){App.psInfoScroll&&(App.psInfoScroll.update(),e.css("opacity",1)),App.firstSong&&(App.$mosaics.removeClass("is-disabled"),App.firstSong=!1)}});App.psInfoScroll&&e.css("opacity",0),App.firstSong?(App.$mosaics.addClass("is-disabled"),$(window).width()<=650?f.to(App.$albumWrap,.5,{paddingBottom:80,ease:App.animation.ease},0).to(App.$albumTitle.parent(),.5,{top:"100%",ease:App.animation.ease},0).to(App.$albumTitle,.5,{marginTop:"0",y:"40px",ease:App.animation.ease},0).to(App.$listSongsTitle.parent(),.5,{top:"100%",marginTop:"70px",ease:App.animation.ease},0):f.to(App.$albumTitle,.5,{y:-90,ease:App.animation.ease},0).to(App.$listSongsTitle.parent(),.5,{top:"59%",ease:App.animation.ease},0),f.to(App.$mosaicsElementsStatic,.5,{fill:"transparent",ease:App.animation.ease}).to(App.$albumInfo,.5,{width:"100%",opacity:1,visibility:"visible",ease:App.animation.ease},0).to(App.$albumControl,.5,{opacity:1,visibility:"visible",marginBottom:0,y:0,ease:App.animation.ease},0).to(App.$closeBtn,.3,{opacity:1,display:"block",ease:App.animation.ease}).to(b,.3,{opacity:1,display:"block",ease:App.animation.ease},"-=0.15").to(c,.3,{opacity:1,display:"block",ease:App.animation.ease},"-=0.15").to(d,.3,{opacity:1,display:"block",ease:App.animation.ease},"-=0.15")):f.to(App.$infoText,.3,{opacity:0,display:"none",ease:App.animation.ease}).to(App.$infoAuthor,.3,{opacity:0,display:"none",ease:App.animation.ease},"-=0.15").to(App.$songTitle,.3,{opacity:0,display:"none",ease:App.animation.ease},"-=0.15").to(b,.3,{opacity:1,display:"block",ease:App.animation.ease}).to(c,.3,{opacity:1,display:"block",ease:App.animation.ease},"-=0.15").to(d,.3,{opacity:1,display:"block",ease:App.animation.ease},"-=0.15")}function activeElement(a){var b=App.$mosaicsElementsHover.filter("[data-index="+a+"]"),c=App.$mosaicsElementsHover.filter("[data-index="+App.hoverIndex+"]"),d=App.$mosaicsElementsHover.not(c),e=b.parent(),f=e.data("center");App.activeIndex=a,changeBtnStatus(),openAnimation(a),musicPlay(a),scaleOut(d),App.hoverIndex&&!b.is(":hover")?scaleOut(b,!0):scaleIn(b,f)}function closeAnimation(){function a(a){var c=b.time(),d=a._totalDuration;App.music[App.activeIndex-1].volume=1-c/d}var b=new TimelineLite({onComplete:function(){musicStop(App.activeIndex),App.hoverIndex=!1,scaleOut(App.$mosaicsElementsHover),App.activeIndex=!1,App.firstSong=!0,App.$mosaics.css("pointer-events","all")},onUpdate:function(){a(this)}});App.psInfoScroll&&$(".js-album-info__text").find(".ps__rail-y").css("opacity",0),App.$mosaics.css("pointer-events","none"),b.to(App.$infoText,.3,{opacity:0,display:"none",ease:App.animation.ease}).to(App.$infoAuthor,.3,{opacity:0,display:"none",ease:App.animation.ease},"-=0.15").to(App.$songTitle,.3,{opacity:0,display:"none",ease:App.animation.ease},"-=0.15").to(App.$closeBtn,.3,{opacity:0,display:"none",ease:App.animation.ease},"-=0.15").to(App.$albumInfo,.3,{opacity:0,visibility:"hidden",ease:App.animation.ease},"-=0.3").add("infoHide","-=0.15").to(App.$albumControl,.5,{opacity:0,marginBottom:-60,y:70,visibility:"hidden",ease:App.animation.ease},"infoHide").to(App.$albumInfo,.5,{width:"0",ease:App.animation.ease},"infoHide").to(App.$mosaicsElementsStatic,.5,{fill:"#D11C00",ease:App.animation.ease},"infoHide"),$(window).width()<=650?b.to(App.$albumWrap,.5,{paddingBottom:0,ease:App.animation.ease},"infoHide").to(App.$albumTitle.parent(),.5,{top:"50%",ease:App.animation.ease},"infoHide").to(App.$albumTitle,.5,{marginTop:"-9px",y:"0",ease:App.animation.ease},"infoHide").to(App.$listSongsTitle.parent(),.5,{top:"50%",marginTop:"34px",ease:App.animation.ease},"infoHide"):b.to(App.$albumTitle,.5,{y:0,ease:App.animation.ease},"infoHide").to(App.$listSongsTitle.parent(),.5,{top:"50%",ease:App.animation.ease},"infoHide")}function logoAnimate(){var a=new TimelineLite;return App.$logoLetter.each(function(b){var c=b>0?"-=0.4":"none";a.to($(this),.5,{opacity:1,ease:App.animation.ease},c)}),a}function socialAnimate(){var a=new TimelineLite;return App.$socialItems.each(function(b){var c=b>0?"-=0.7":"none";a.to($(this),.8,{opacity:1,ease:App.animation.ease},c)}),a}function socialMusicAnimate(){var a=new TimelineLite;return $(App.$socialMusicItems.get().reverse()).each(function(b){var c=b>0?"-=1":"none";a.to($(this),1.1,{opacity:1,ease:App.animation.ease},c)}),a}function hamburgerAnimate(){var a=new TimelineLite({delay:.3});return a.to(App.$hamburgerIcon,.6,{opacity:1,ease:App.animation.ease},0).to($(App.$hamburgerText),.6,{opacity:1,ease:App.animation.ease},"-=0.4"),a}function glitchAnimate(){var a=new TimelineMax({repeat:6.1}),b=App.$albumTitlePattern.filter(".t-circle"),c=App.$albumTitlePattern.filter(".t-line"),d=App.$albumTitlePattern.filter(".t-plus"),e=App.$albumTitlePattern.filter(".t-dagger"),f=App.$albumTitlePattern.filter(".t-hexagon"),g=App.$albumTitlePattern.filter(".t-square");return a.to(b,.04,{opacity:1,ease:App.animation.ease}).to(b,.04,{opacity:0,ease:App.animation.ease}).to(c,.04,{opacity:1,ease:App.animation.ease}).to(c,.04,{opacity:0,ease:App.animation.ease}).to(d,.04,{opacity:1,ease:App.animation.ease}).to(d,.04,{opacity:0,ease:App.animation.ease}).to(e,.04,{opacity:1,ease:App.animation.ease}).to(e,.04,{opacity:0,ease:App.animation.ease}).to(f,.04,{opacity:1,ease:App.animation.ease}).to(f,.04,{opacity:0,ease:App.animation.ease}).to(g,.04,{opacity:1,ease:App.animation.ease}).to(g,.04,{opacity:0,ease:App.animation.ease}),a}function albumTitleAnimate(){var a=new TimelineLite;return a.to(App.$albumTitle,.5,{opacity:1,ease:App.animation.ease}).to($(App.$albumTitleLetter[5]),.6,{opacity:1,ease:App.animation.ease},.5).to($(App.$albumTitleLetter[0]),.6,{opacity:1,ease:App.animation.ease},"-=0.3").to($(App.$albumTitleLetter[4]),.6,{opacity:1,ease:App.animation.ease},"-=0.3").to($(App.$albumTitleLetter[2]),.6,{opacity:1,ease:App.animation.ease},"-=0.3").to($(App.$albumTitleLetter[6]),.6,{opacity:1,ease:App.animation.ease},"-=0.3").to($(App.$albumTitleLetter[1]),.6,{opacity:1,ease:App.animation.ease},"-=0.3").to($(App.$albumTitleLetter[3]),.6,{opacity:1,ease:App.animation.ease},"-=0.3").add(glitchAnimate(),0).to(App.$albumTitle,.7,{scale:1,marginTop:-9,ease:App.animation.ease}).to(App.$albumTitle,.4,{color:"white",ease:App.animation.ease},"+=0.1"),a}function mosaicsAnimate(){var a=new TimelineLite({delay:-.4,onComplete:function(){App.$mosaics.removeClass("is-disabled")}}),b=new TimelineLite,c=new TimelineLite;return b.to($(App.$mosaicsElementsStatic[0]),.3,{opacity:1,ease:App.animation.ease}).to($(App.$mosaicsElementsStatic[5]),.3,{opacity:1,ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[1]),.3,{opacity:1,ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[6]),.3,{opacity:1,ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[2]),.3,{opacity:1,ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[7]),.3,{opacity:1,ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[3]),.3,{opacity:1,ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[8]),.3,{opacity:1,ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[4]),.3,{opacity:1,ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[9]),.3,{opacity:1,ease:App.animation.ease},"-=0.25"),c.to($(App.$mosaicsElementsStatic[0]),.3,{fill:"#D11C00",ease:App.animation.ease}).to($(App.$mosaicsElementsStatic[5]),.3,{fill:"#D11C00",ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[1]),.3,{fill:"#D11C00",ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[6]),.3,{fill:"#D11C00",ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[2]),.3,{fill:"#D11C00",ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[7]),.3,{fill:"#D11C00",ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[3]),.3,{fill:"#D11C00",ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[8]),.3,{fill:"#D11C00",ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[4]),.3,{fill:"#D11C00",ease:App.animation.ease},"-=0.25").to($(App.$mosaicsElementsStatic[9]),.3,{fill:"#D11C00",ease:App.animation.ease},"-=0.25"),a.to(App.$mosaics,0,{visibility:"visible"},0).add(b).add(c,.2),a}function animationStart(){new TimelineLite({delay:.2}).to(App.$startBtn,.2,{opacity:0,display:"none",ease:App.animation.ease}).to(App.$loader,.2,{opacity:0,display:"none",ease:App.animation.ease},-.2).add("loaderHide","+=0.2").add(logoAnimate(),"loaderHide").add(socialAnimate(),"loaderHide").add(socialMusicAnimate(),"loaderHide").add(hamburgerAnimate(),"loaderHide").add(albumTitleAnimate(),"loaderHide").add(mosaicsAnimate())}function changeCurrentPage(){var a=new TimelineLite;App.$html.removeClass("is-sidebar-open"),App.sidebarOpen=!1,App.$navLink.parent().removeClass("is-active"),App.$navLink.filter("[data-target="+App.currentPage+"]").parent().addClass("is-active"),$.each(App.pages,function(b,c){b!==App.currentPage&&a.to(c,.5,{opacity:0,visibility:"hidden"})}),a.to(App.pages[App.currentPage],.5,{opacity:1,visibility:"visible"})}function checkCurrentPage(){window.location.hash&&window.location.hash.substring(1)in App.pages?App.currentPage=window.location.hash.substring(1):App.currentPage="album",changeCurrentPage()}function scrollInit(a){return new PerfectScrollbar(a[0],{wheelSpeed:.5,swipePropagation:!1})}var App={$win:$(window),$doc:$(document),$html:$("html"),$body:$("body"),browser:!1,$startBtn:$(".js-start-btn"),$loader:$(".js-loader"),$logo:$(".js-logo"),$logoLetter:$(".js-logo .letter"),$socialItems:$(".js-footer-social__item"),$socialMusicItems:$(".js-footer-music__item"),$hamburgerLink:$(".js-banner-hamburger__link"),$hamburgerText:$(".js-banner-hamburger__link .c-banner-hamburger__text"),$hamburgerIcon:$(".js-banner-hamburger__link .c-banner-hamburger__icon"),$album:$(".js-album"),$albumWrap:$(".c-album-wrap"),$albumInfo:$(".js-album-info"),$albumTitle:$(".js-album-title"),$albumTitleLetter:$(".js-album-title .letter"),$albumTitlePattern:$(".js-album-title .pattern"),$albumControl:$(".js-album-control"),$mosaics:$(".js-mosaics"),$mosaicsWrap:$(".js-album-list__img"),mosaicsPosition:{},$mosaicsElements:$(".js-mosaics .svg-mosaics__element"),$mosaicsElementsHover:$(".js-mosaics [data-hover=true]"),$mosaicsElementsStatic:$(".js-mosaics .svg-mosaics__element-static"),$mosaicsElementsShadow:$(".js-mosaics .svg-mosaics__element-shadow"),$listSongsTitle:$(".js-album-list__song-item"),$songTitle:$(".js-album-info__title-item"),$infoAuthor:$(".js-album-info__author-item"),$infoText:$(".js-album-info__text-item"),$infoMobileToggle:$(".js-album-info__top-toggle"),$closeBtn:$(".js-album-info__close"),$playBtn:$(".js-album-control__btn.t-play"),$changeBtn:$(".js-album-control__btn.t-next, .js-album-control__btn.t-prev,.js-album-info__top-btn.t-next, .js-album-info__top-btn.t-prev"),$navLink:$(".js-sidebar-nav__link"),$scrollEl:$(".js-scroll"),psInfoScroll:!1,psSidebarScroll:!1,psTourScroll:!1,hoverIndex:!1,activeIndex:!1,firstSong:!0,currentPage:!1,sidebarOpen:!1,mobileInfoOpen:!1};App.pages={tour:$(".js-tour"),album:App.$album},App.music=[new Audio,new Audio,new Audio,new Audio,new Audio,new Audio,new Audio,new Audio,new Audio,new Audio],App.musicSrc=["/src/mp3/cut/1.mp3","/src/mp3/cut/2.mp3","/src/mp3/cut/3.mp3","/src/mp3/cut/4.mp3","/src/mp3/cut/5.mp3","/src/mp3/cut/6.mp3","/src/mp3/cut/7.mp3","/src/mp3/cut/8.mp3","/src/mp3/cut/9.mp3","/src/mp3/cut/10.mp3"],$.each(App.music,function(a){this.preload="none",this.src=App.musicSrc[a]}),App.animation={transition:.3,ease:CustomEase.create("custom","M0,0 C0.25,0.1 0.25,1 1,1")},/MSIE 10/i.test(navigator.userAgent)&&(App.browser="ie",App.$html.addClass("is-ie")),(/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent))&&(App.browser="ie",App.$html.addClass("is-ie")),/Edge\/\d./i.test(navigator.userAgent)&&(App.browser="edge",App.$html.addClass("is-edge")),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(App.browser="firefox",App.$html.addClass("is-firefox")),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&(App.browser="safari",App.$html.addClass("is-safari")),SVGElement&&SVGElement.prototype&&(SVGElement.prototype.hasClass=function(a){return new RegExp("(\\s|^)"+a+"(\\s|$)").test(this.getAttribute("class"))},SVGElement.prototype.addClass=function(a){this.hasClass(a)||this.setAttribute("class",this.getAttribute("class")+" "+a)},SVGElement.prototype.removeClass=function(a){var b=this.getAttribute("class").replace(new RegExp("(\\s|^)"+a+"(\\s|$)","g"),"$2");this.hasClass(a)&&this.setAttribute("class",b)},SVGElement.prototype.toggleClass=function(a){this.hasClass(a)?this.removeClass(a):this.addClass(a)}),changeBtnStatus(),$.each(App.music,function(){this.addEventListener("ended",function(){var a=App.music.indexOf(this)+1;a+1>App.music.length?closeAnimation():activeElement(a+1)})}),App.$mosaicsElementsHover.on("mouseenter",function(){var a=$(this).data("index"),b=$(this),c=b.parent(),d=c.data("center"),e=App.$mosaicsElementsHover.filter("[data-index="+App.activeIndex+"]");App.hoverIndex=a,App.$mosaics.children().last()[0]!==c[0]&&App.$mosaics.append(c),a!==App.activeIndex&&scaleOut(e,!0),setTimeout(function(){scaleIn(b,d)},0)}).on("mouseleave",function(a){var b,c,d,e,f=$(a.toElement);App.hoverIndex=!1,App.activeIndex?(d=App.$mosaicsElementsHover.not("[data-index="+App.activeIndex+"]"),e=App.$mosaicsElementsHover.filter("[data-index="+App.activeIndex+"]"),b=e.parent(),c=b.data("center"),f.hasClass("svg-mosaics__element-hover")?(scaleOut(d),scaleOut(e,!0)):(scaleOut(d),scaleIn(e,c))):scaleOut(App.$mosaicsElementsHover)}),App.$mosaicsElementsHover.on("click",_.debounce(function(){var a=$(this).data("index");musicStop(),activeElement(a)},500,{leading:!0,trailing:!1})),App.$closeBtn.on("click",function(){closeAnimation()}),App.$playBtn.on("click",function(){!1===App.music[App.activeIndex-1].paused?musicPause(App.activeIndex):musicPlay(App.activeIndex)}),App.$changeBtn.on("click",_.debounce(function(){musicStop(App.activeIndex),activeElement($(this).hasClass("t-prev")?App.activeIndex-1:App.activeIndex+1)},500,{leading:!0,trailing:!1})),window.addEventListener("focus",function(){TweenLite.lagSmoothing(1e3,16)}),window.addEventListener("blur",function(){TweenLite.lagSmoothing(0)}),$(document).on("keyup",function(a){32===a.which&&(!1===App.music[App.activeIndex-1].paused?musicPause(App.activeIndex):musicPlay(App.activeIndex))}),App.$startBtn.on("click",function(){animationStart()}),App.$hamburgerLink.on("click",function(a){if(a.preventDefault(),App.sidebarOpen)return App.$html.removeClass("is-sidebar-open"),void(App.sidebarOpen=!1);App.$html.addClass("is-sidebar-open"),App.sidebarOpen=!0}),App.$doc.on("click",function(a){$(a.target).closest(".c-sidebar").length||$(a.target).closest(".c-banner").length||App.sidebarOpen&&(App.$html.removeClass("is-sidebar-open"),App.sidebarOpen=!1)}),checkCurrentPage(),App.$navLink.on("click",function(a){a.preventDefault(),window.location.hash=$(this).attr("href"),App.currentPage=$(this).data("target"),changeCurrentPage()}),App.$doc.ready(function(){/Android | webOS | iPhone | iPad | iPod | BlackBerry | IEMobile | Opera Mini | Mobile | mobile | CriOS/i.test(navigator.userAgent)?$("html").addClass("is-mobile"):App.$win.width()>=991&&(App.psInfoScroll=scrollInit($(".js-album-info__text")),App.psSidebarScroll=scrollInit($(".js-sidebar-main")),App.psTourScroll=scrollInit($(".js-tour-list__wrap")))}),App.$infoMobileToggle.on("click",function(a){if(a.preventDefault(),App.mobileInfoOpen)return App.$html.removeClass("is-info-open"),void(App.mobileInfoOpen=!1);App.$html.addClass("is-info-open"),App.mobileInfoOpen=!0}),App.$win.on("load",function(){App.$html.addClass("is-loaded")});